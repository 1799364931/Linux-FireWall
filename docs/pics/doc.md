# Linux 个人防火墙实验报告

## 1 实验目的

实现在Linux下的个人防火墙，实现功能：
+ 实时过滤，按安全规则对进出本机的数据包进行按规则过滤，过滤规则支持：
    + IP地址过滤
    + IP掩码过滤
    + MAC地址过滤
    + 端口过滤
    + IP协议过滤
    + 时间过滤
    + 包内负载字符串过滤
    + 网络接口过滤
    + 连接状态过滤
+ 黑白名单规则添加、删除、显示、切换。
+ 日志记录网络访问详细信息。
+ 截获时进行用户提示。
+ 命令行与网页界面交互。
    

## 2 实验环境和工具

### 2.1 实验环境
系统环境：Linux Ubuntu24.04.1 LTS \
编程环境：
+ 内核代码：C99
+ 用户态代码：C++17
+ 后端代码：Python 3.8
+ 前端代码：Vue

### 2.2 工具
+ VMware 虚拟机以运行Linux环境
+ vscode 进行代码编写和执行

## 3 设计与实现


### 3.1 架构设计

防火墙的架构主要分为四大模块：

+ 内核态：防火墙核心功能组件，截获并解析进出本机的数据包，按规则对数据包进行拦截或放行。

+ 用户态：防火墙交互组件，将用户命令输入解析为安全规则和指令，向内核态的防火墙发送对应信息，以实现安全规则的增删查等常用功能。

+ 网页后端：防火墙远程交互功能的后端程序，用于解析前端发送的请求为对应的命令，调用用户态程序以实现防火墙控制功能。

+ 网页前端：防火墙远程交互功能的前端程序，优化用户对防火墙的控制交互与规则增添删除等功能的友好性。

#### 3.1.1 内核态模块设计

#### 3.1.2 用户态模块设计

#### 3.1.3 用户-内核通信设计

#### 3.1.4 网页交互设计

### 3.2 防火墙功能设计

#### 3.2.1 `hook function`设计

#### 3.2.2 规则结构设计

#### 3.2.3 防火墙拦截设计

#### 3.2.4 规则通信序列化设计

### 3.3 日志记录设计

### 3.4 用户交互设计

#### 3.4.1 命令行设计

#### 3.4.2 前后端设计

## 4 实验结果

## 5 改进和拓展方向


## 6 总结


## 7 小组成员及分工


## 8 参考文献